---
title: "ネットワークの学習法に困っているそこのあなたへ"
emoji: "🤷‍♂️"
type: "tech"
topics: ["ネットワーク", "初心者"]
published: true
published_at: 2023-06-28 08:00
---

# 対象読者

- ネットワークについて学びたいけど、どこから始めたらいいか分からない初学者
- すでにネットワークの基本を理解しているけど、より深い理解を求めている中級者
- ブラウザーに URL を入力してから画面が表示されるまで何が起きているのかを知りたくてたまらない方

# TL;DR

- ネットワークについて初学者から中級者までをレベルアップさせる教科書「[ネットワークはなぜつながるのか 第2版 知っておきたいTCP/IP、LAN、光ファイバの基礎知識](https://www.amazon.co.jp/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AF%E3%81%AA%E3%81%9C%E3%81%A4%E3%81%AA%E3%81%8C%E3%82%8B%E3%81%AE%E3%81%8B-%E7%AC%AC2%E7%89%88-%E7%9F%A5%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8D%E3%81%9F%E3%81%84TCP-IP%E3%80%81LAN%E3%80%81%E5%85%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%90%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98-%E6%88%B8%E6%A0%B9/dp/4822283119)」の話
- 「ブラウザーに URL を入力してから画面が表示されるまで何が起きているの？」って思ったことがあるならば、この本はあなたのために書かれた本です
- でも、ただ読んで終わりじゃ勿体ないので、せっかくなら学んだことを形にしよう

# はじめに

今日、私たちの日常生活は無数の「ネットワーク」に支えられています。スマートフォンやパソコンを使って情報を検索したり、SNS で友人とコミュニケーションを取ったりする一方で、その裏側ではインターネットという広大なネットワークが機能しています。それは、文字通り「網」のように、世界中のコンピューターやデバイスを繋げて、情報を素早くやり取りするための基盤となっています。さらに、ネットワーク内の各要素は相互に影響を及ぼし合い、全体として 1 つの大きな「システム」を形成します。

そんなネットワークの奥深い世界を学ぼうと思いつつも、あまりの広大さと奥深さにどのように学べば良いか困っているのではないでしょうか。本当に必要な知識は何なのか、どのように学習を進めるべきなのかを見極めるのは容易なことではありません。

ここで私がおすすめするのが、「**ネットワークはなぜつながるのか 第2版 知っておきたいTCP/IP、LAN、光ファイバの基礎知識**」という書籍です。この書籍は、ネットワークの本質を深掘りし、それがどのようにして私たちの世界を形成しているのかを解き明かします。一読により、私たちが日常的に利用しているネットワークの基本的な機能や、それが全体としてどのように作用しているのかについて理解が深まるでしょう。

この一冊を手に取れば、ネットワーク学習におけるあなたの迷いは一掃され、一歩前進できるはずです。

# 概要

![tour](/images/why_are_networks_connected/tour.png)

## 第1章 Webブラウザ

私たちがインターネットを利用する際、最初に触れるのが Web ブラウザーです。情報を検索したり、SNS に投稿したり、オンラインショッピングを楽しんだりする際、すべてブラウザーを通して行われます。この章では、Web ブラウザーが情報をどのように取得し、どのように情報を私たちに表示するのかを詳しく学びます。URL の構造や DNS システム、HTTP リクエストとレスポンス、そしてブラウザーが Web ページをレンダリングする方法など、ブラウザーの裏側で何が起こっているのかを理解することで、Web ブラウザーの真価が見えてきます。

## 第2章 プロトコル・スタック、LANアダプタ

Web ブラウザーで情報を検索すると、それに対するリクエストがコンピューターの内部を通ってネットワークに送信されます。その際に欠かせないのがプロトコルスタックと LAN アダプターです。この章では、データがどのようにパケットに分割され、プロトコルスタックを通じて LAN アダプターに送られ、さらにネットワークに送信されるのかを学びます。また、TCP/IP モデルの理解を深め、それがどのようにネットワーク通信を可能にしているのかを理解します。同時に、LAN アダプターがどのようにネットワークとコンピューターを接続し、どのようにデータを送受信するのかについても詳しく学びます。

## 第3章 ハブ、スイッチ、ルーター

ネットワーク内でデータパケットが正確に目的地に到達するためには、ハブ、スイッチ、ルーターといったネットワークデバイスが必要です。この章では、これらのデバイスがどのようにデータパケットの送受信を助け、ネットワークトラフィックを管理するのかを詳しく学びます。特に、データパケットがネットワーク内をどのように移動しどのように目的地に到達するのかを理解することで、ネットワークがどのように効率的に機能するのか、そしてそれがどのように我々のデータ通信の体験を向上させるのかを理解できます。

## 第4章 アクセス回線、プロバイダ

インターネットに接続するためには、我々のデバイスからプロバイダのネットワークまでの「アクセス回線」が必要です。この章では、DSL、ケーブル、光ファイバー、そしてモバイル接続など、さまざまなアクセス回線の種類とその特性について深く掘り下げます。また、プロバイダーがどのようにこれらの回線を利用してインターネット接続サービスを提供しているのか、そしてそのサービスの特性と限界を理解します。これらの知識は、自分のニーズに最適なインターネット接続を選択するために重要です。

## 第5章 ファイアウォール、キャッシュサーバー

インターネット接続の安全性と効率性は、我々のオンライン活動において極めて重要です。この章では、安全性を確保するための「ファイアウォール」や、効率性を向上させる「キャッシュサーバー」の仕組みについて詳しく学びます。ファイアウォールがどのように不正な通信を防ぎ、キャッシュサーバーがどのように頻繁にアクセスされるデータを高速に提供するのかを理解します。これらのデバイスがどのように協調して、我々のオンライン体験を安全かつ快適に保っているのかを理解することで、インターネットの裏側で何が起きているのかをより深く理解できます。

## 第6章 Webサーバー

我々がブラウザーで情報を検索するとき、その情報はどこから来るのでしょうか？それが「Web サーバー」です。この章では、Web サーバーがどのようにして我々のリクエストに応答し、必要な情報を提供するのかを詳しく学びます。また、Web サーバーがどのようにして多数のリクエストを効率的に処理し、我々が求める情報を瞬時に提供するのかについても理解します。これらの知識を通じて、我々が日常的に利用するインターネットの裏側で行われているプロセスを深く理解できます。

# 実践編

## UDP, TCPのソケットプログラミング

書籍の第 2 章で学習する TCP/IP の理論を活用して、実際にソケットプログラミングを体験してみましょう。これにより、理論が具体的な形となり、UDP と TCP という 2 つの主要なネットワークプロトコルの違いと特性を深く理解できます。本章では、私自身が体験した UDP と TCP のソケットプログラミングの実践例を共有します。これを皆さんのアウトプットの一例として参考にいただければ幸いです。

まず、UDP について説明します。UDP の主な特性はそのシンプルさです。クライアントがサーバーにデータを送信すると、それが直接送信されます。この送信プロセスを視覚化するために、[Wireshark](https://www.wireshark.org/download.html)を使用して UDP 通信をキャプチャしました。下画像は、UDP パケットが単純なデータ送信だけを行っていることを示しています。これは、パケットの到着を保証せず、データが失われても再送しない UDP の性質を具体的に示しています。

![udp_data_transfer](/images/why_are_networks_connected/udp_data_transfer.png)

次に、TCP の特性について説明します。TCP は信頼性の高いデータ通信を実現します。そのため、接続設定、データ送信、接続終了の各段階で特定のプロトコルを遵守します。それぞれの段階を Wireshark のキャプチャ画像で見ていきましょう。

まず、TCP の接続設定です。クライアントがサーバーに接続を求めると、サーバーはそれに応答し、接続を確立します。このプロセスは「3 ウェイハンドシェイク」と呼ばれます。下画像は、SYN（同期）パケットの送信と ACK（確認応答）パケットの受信によるハンドシェイクを示しています。

![three_way_handshake](/images/why_are_networks_connected/tcp_three_way_handshake.png)

TCP は信頼性の高い通信を実現するために、各ステップで確認応答（ACK）を必要とします。この要求に応答がない場合、TCP はそのメッセージを再送します。これは接続の確立（SYN パケットの送信）にも適用されます。この再送機構によって、ネットワークの問題や一時的な遅延が生じても、TCP は信頼性の高い接続を維持できます。再送は、必要に応じて複数回行われ、それにより接続の確立、データの送受信、そして接続の終了を確実に行うことができます。以下にその様子を示します。

![tcp_retry](/images/why_are_networks_connected/tcp_retry.png)

続いて、データ送信時には、クライアントがデータを送信し、その到着をサーバーが ACK パケットで確認します。ACK パケットが返ってこない場合、データは再送されます。下画像は、データ送信と ACK のやり取りを示しています。

![tcp_data_transfer](/images/why_are_networks_connected/tcp_data_transfer.png)

最後に、TCP の接続終了です。接続の終了は、FIN（終了）パケットの交換によって行われます。クライアントがサーバーに接続の終了を通知し、サーバーがそれを確認します。下画像は、この FIN パケットの交換を示しています。

![tcp_fin](/images/why_are_networks_connected/tcp_fin.png)

これらの Wireshark のキャプチャ画像を通じて、UDP と TCP の通信プロセスとその違いを具体的に理解できます。UDP の場合、データが直接送信され、その送信が成功したかどうかの確認は行われません。これに対して、TCP では、接続の確立から終了まで、データの完全な送受信を確保するための手順があります。

それぞれのプロトコルが適している用途を考えると、UDP は速度と効率性が必要なアプリケーション、例えばライブビデオやゲームで使われます。一方、TCP はデータの完全性が必要なアプリケーション、例えばウェブブラウジングや電子メールで一般的に使用されます。

この理論的な知識だけでなく、実際のソケットプログラミングの経験と Wireshark での視覚的な確認を通じて、これらのプロトコルの違いとそれぞれの特性を理解しました。このような深い理解が、今後のネットワーク関連のプログラミングやトラブルシューティングにおいて、非常に役立つことでしょう。

実際のコードは以下の Github にありますので、興味ある方は是非覗いてみてください。

https://github.com/bwkw/socket-programming

## 簡易HTTPサーバー

さて、我々が日常的に使用しているインターネットの大部分は HTTP プロトコルによって動いています。Web ページの表示、フォームの提出、画像の読み込みなど、私たちが Web ブラウザーで行っているほぼすべてのアクションは、HTTP リクエストとレスポンスによって可能になっています。そして、これらのリクエストとレスポンスを処理するための核心部分に位置するのが Web サーバーです。

そこで次に、実際に簡易的な HTTP サーバーの実装に挑戦しましょう。TCP/IP の知識を活用し、HTTP リクエストを受け取り、適切な HTTP レスポンスを返すサーバーを作成します。これにより、ネットワークの仕組みをより深く理解するだけでなく、HTTP という日常生活で頻繁に使用しているプロトコルの動作を実感できます。

この実装を通じて、ブラウザーが Web サーバーとどのように通信しているのか、また HTTP リクエストとレスポンスがどのように構造化されているのかを深く理解できます。そして、それが全て TCP/IP ネットワーク上でどのように伝送されているのかという、見えない部分の理解にもつながります。

実際のコードは以下の Github にありますので、こちらも興味がある方は是非覗いてみてください。

https://github.com/bwkw/pico-http-server

# 最後に

「**ネットワークはなぜつながるのか 第2版 知っておきたいTCP/IP、LAN、光ファイバの基礎知識**」は、ネットワーキング技術の基本的な原理から応用までを詳細に説明した教科書的な一冊です。

<!-- textlint-disable -->

この本を通じて、ネットワークがどのように機能し、どのように情報が送受信され、またその安全性はどのように確保されるのか、といったことについて理解を深めることができます。

<!-- textlint-enable -->

TCP/IP、LAN、光ファイバといった重要なネットワーク技術を理解することは、現代のエンジニアにとって不可欠です。この書籍はそれらを掌握するための優れた指南役となり、インターネットが私たちの日常生活の不可欠な一部である理由、そして自分たちが開発するソフトウェアやシステムがこの巨大なネットワーク上でどのように機能するのかを理解できます。

最後に、この本はただの理論書ではなく、具体的な例と実践的な知識を多く含んでおり、読者が理論を現実の問題に適用することを可能にします。それはエンジニアとしてのスキルを高めるための重要な要素であり、この本が提供してくれる価値の一部です。
