---
title: "アーキテクチャ"
emoji: "⚙️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["architecture"]
published: false
---

# TL;DR

- 営業組織の拡大により、「運用工数の可視化」が課題となっている
- Google Calendar と連携し、予定作成時に工数データを簡単に入力できる Chrome 拡張機能を開発中
- この拡張機能は、記録作業の負担を軽減し、集計作業を効率化することを目指している
- 2025 年 1 月からベータ版として運用を開始し、フィードバックを基に改善を進める予定

# はじめに

こんにちは、直近はシステムのリプレースに着手している内藤です。
リプレースや大規模な設計変更を進めている方にとって、アーキテクチャ設計の悩みは尽きないですよね。

そんな中、先日参加したアーキテクチャカンファレンス 2024 では、トレードオフの重要性や進化的アーキテクチャを通じた柔軟なシステム設計など、現場に直結するテーマが多く取り上げられていました。

この記事では、その中から特に印象的だった「トレードオフ分析の重要性」、「組織とアーキテクチャの相互作用」および「進化的アーキテクチャの実践」に焦点を当て、それぞれの実践例を交えながら、私が得た知見を共有できればと思います👋

# トレードオフ分析の重要性

トレードオフとは、複数の要件や目標が競合する中で、最適な選択を行うために他の選択肢を犠牲にする必要がある状況を指します。アーキテクチャ設計においては、性能、コスト、スケーラビリティ、保守性など、相反する要求をどうバランスさせるかが常に問われます。

キーノートセッションでは、このトレードオフ分析の重要性が強調され、次のようなポイントが挙げられました。

## 評価軸の重み付けが均一ではない

キーノートセッションでは、「全ての評価軸が同等の重みを持つわけではない」という重要な洞察が共有されました。たとえば、性能とスケーラビリティで優れる案と、コストや保守性など他の軸で優れる案があった場合でも、性能が最優先されるプロジェクトでは前者が選ばれるべきです。

このように意思決定の際に、すべての項目を平等に扱うのではなく、ビジネス目標やプロジェクトの背景に応じて評価軸の重み付けを行うことが不可欠であることが強調されていました。

## トレードオフ分析は変化する

トレードオフ分析は一度行って終わりではなく、継続的なプロセスであるべきだという指摘もありました。
市場環境やステークホルダーの要求、使用する技術の進化などによって、トレードオフの条件が変化するため、柔軟に見直しを行うことが必要です。

具体例として、短期的にはコストを抑える設計が求められていても、事業が成長するにつれてスケーラビリティや保守性が重視されるケースは珍しくなく(これはよくある話ですね...)、トレードオフ分析が「プロジェクトの成長とともに進化するべきプロセス」であることが強調されていました。

## 意思決定プロセスの透明性

トレードオフ分析を成功させるためには、意思決定のプロセスを透明に保ち、関係者全員が評価基準や選択理由を理解できるようにすることが大切です。この透明性を支えるために **ADR（Architectural Decision Records）** が有効です。ADR は意思決定を体系的に記録し、その背景や理由を明確化します。たとえば ZOZO では、ADR を活用して過去の意思決定履歴を共有し、新たな課題への迅速な対応や透明性向上につなげています。

## フィードバックループによる継続的改善

キーノートでは、トレードオフ分析を支える仕組みとして、フィードバックループの構築も重要であると述べられました。
「設計の選択が運用にどう影響を与えたのか」を振り返り、継続的に評価することで、意思決定の精度が向上し、設計の持続可能性が高まると語られていました。

# 組織とアーキテクチャの相互作用

## 組織目標とアーキテクチャの調和

SanSan の事例では、「適応度関数（Fitness Function）」を導入し、システム設計がビジネス目標と一致しているか継続的に評価しています。このアプローチは、組織とアーキテクチャが連動して進化するべきという考え方を実践しています。

## コンウェイの法則とその適用

コンウェイの法則（システム設計は組織構造を反映する）を活用し、組織構造と一致したアーキテクチャ設計が可能です。Bitkey ではイベントストーミングやモブプログラミングなどでチーム全体が設計プロセスに参加し、効率的な設計プロセスを実現しました。

# 進化的アーキテクチャの実践

## シンプルさと柔軟性

進化的アーキテクチャはシンプルな設計を基盤とし、変更への対応力を高めます。オープンロジではアクセスログから未使用コードを特定・削除し、モジュール間責務の明確化で柔軟性を確保しました。

事例：オープンロジ
アクセスログを活用して未使用コードを特定し、デッドコードを削除。
モジュール間の責務を明確化し、柔軟性を確保。

## 偶有的複雑性の最小化

ログラスでは偶有的複雑性（不要な複雑さ）排除に注力し、本質的課題解決に集中しています。この手法は技術負債削減や運用コスト低減に寄与します。

# おわりに

アーキテクチャカンファレンス2024で得られた知見は以下の通りです。

1. トレードオフ分析: 設計プロセスで避けられないトレードオフは、意思決定の質向上に不可欠です。多目的最適化やパレート最適解など具体的手法の導入が鍵となります。
1. 組織とアーキテクチャ: 組織構造と設計思想の一致は効率的な開発プロセスにつながります。コンウェイの法則や適応度関数の活用がその指針となります。
1. 進化的アーキテクチャ: シンプルさと柔軟性は持続可能なシステム構築において重要です。偶有的複雑性排除や継続的デリバリ手法が効果的です。

読者の皆様が、これらの知見を日々の業務に取り入れ、持続可能なシステム構築を目指す一助となれば幸いです。

# 参考文献

https://speakerdeck.com/findyinc/modern-trade-off-analysis
https://speakerdeck.com/sansantech/20241126
https://speakerdeck.com/bitkey/co-creating-architecture-a-sustainable-development-ecosystem-built-by-the-entire-team
https://docs.google.com/presentation/d/1ziV5yqWkqUZl6pCTmjGveB-QfgoSC_8BhYmpWy7mE6A/edit#slide=id.p1
https://speakerdeck.com/kworkdev/technology-selection-and-rearchitecture-for-compounding-strategy
https://speakerdeck.com/deeprain/wu-liu-sisutemuniokerurihuakutaringutoakitekutiyanozai-gou-zhu-yi-cun-guan-xi-tomoziyurufen-ge-nozhong-yao-xing
https://speakerdeck.com/atamaplus/akitekutodan-sheng-tokorekara-sutatoatupu-7nian-nocheng-chang-totong-mi
